<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Rover API Documentation: Rover API Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="rover_doxygen_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="roverapilogo2.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Rover API Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Rover API Main Page </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="api_info"></a>
roverapp and Rover API Info</h1>
<p>Rover software, called <b>roverapp</b> features a multi-threaded (POSIX threads or Pthreads) C/C++ implementation that runs on Linux-based embedded single board computers (such as Raspberry Pi). Rover features countless threads dedicated to communication infrastructure, sensor driving, display unit (such as OLED displays) utilization, bluetooth communication, image processing, and behavior modes (such as Parking, Adaptive Cruise Control, Manual Driving, and Booth Modes). It also features drivers for sensors such as magnetometers, accelerometers, various ultrasonic sensors, and camera modules. Furthermore, OLED display, buttons, a buzzer are utilized.</p>
<p>Roverapp builds and contains the <b>Rover API</b>, which is able to handle subset of its functionality. Example functionality covered in <b>Rover API</b> is given below:</p>
<ul>
<li><b>RoverBase</b> RoverBase class provides basic rover functions such as initialization, sleeping, and shutting down. </li>
<li><b>RoverDisplay</b> contains the member functions to control OLED display on the Rover. This class is a wrapper API for Adafruit_GFX and Adafruit_SSD1306 libraries. </li>
<li><b>RoverDriving</b> contains the member functions to drive the rover using its motors. </li>
<li><b>RoverGpio</b> class provides the member functions related to low-level pin driving. This class wraps wiringPi library and is inherited by RoverButton and RoverBuzzer classes. </li>
<li><b>RoverBuzzer</b> class provides the member functions related to embedded buzzer on the rover. </li>
<li><b>RoverButton</b> class contains member functions to access Shutdown button, User button, and customly installed buttons on the rover. </li>
<li><b>RoverUtils</b> contains member functions to retrieve connectivity status and core utilization of the rover. This class wraps status_library lib, developed for the rover-app. </li>
<li><b>RoverSensors</b> is a pure abstract class defining the interface between sensor classes of the rover.</li>
</ul>
<ul>
<li><b>RoverDHT22</b> is a class that is inherited from RoverSensor abstract class. RoverDHT22 class contains member functions and variables to set up and read from DHT22 temperature and humidity sensor that is embedded on the rover. </li>
<li><b>RoverGrooveUltrasonic</b> is a class that is inherited from RoverSensor abstract class. RoverGrooveUltrasonic class contains member functions and variables to set up and read from Groove ultrasonic sensors that are embedded on the rover. </li>
<li><b>RoverHCSR04</b> is a class that is inherited from RoverSensor abstract class. RoverHCSR04 class contains member functions and variables to set up and read from HCSR-04 ultrasonic sensors that are embedded on the rover. </li>
<li><b>RoverInfraredSensor</b> is a class that is inherited from RoverSensor abstract class. RoverInfraredSensor class contains member functions and variables to set up and read from SHARP infrared sensors that are embedded on the rover. </li>
<li><b>RoverGY521</b> is a class that is inherited from RoverSensor abstract class. RoverGY521 class contains member functions and variables to set up and read from GY521 accelerometer that is embedded on the rover. </li>
<li><b>RoverHMC5883L</b> is a class that is inherited from RoverSensor abstract class. RoverHMC5883L class contains member functions and variables to set up and read from HMC5883L bearing sensor that is embedded on the rover.</li>
</ul>
<ul>
<li><b>RoverCloud</b> class is a purely abstract interface for cloud communication classes. </li>
<li><b>RoverQMC5883L</b> is a class that is inherited from RoverSensor abstract class. RoverQMC5883L class contains member functions and variables to set up and read from QMC5883L bearing sensor that is embedded on the rover. </li>
<li><b>RoverHonoCloud</b> contains the member functions to connect and send data to Eclipse Hono instance using several parameters such as host name, port, tenant name, user name, and password. This class wraps hono_interaction library for Rover-specific interactions. </li>
<li><b>RoverPahoMQTT</b> contains member functions to use rover as a client and to publish / subscribe to Eclipse Paho MQTT server topics. </li>
<li><b>RoverMQTTCommand</b> class is an implementation class -privately- extending RoverPahoMQTT for rover-specific topic subscription and publishing using JSON for parsing and using predefined type variables such as RoverControlData_t and RoverSensorData_t.</li>
</ul>
<div class="image">
<img src="rover2.jpg" alt="rover2.jpg"/>
</div>
<h1><a class="anchor" id="overview1"></a>
UML Diagram Overview</h1>
<div class="image">
<img src="RoverAPI_Overview.jpg" alt="RoverAPI_Overview.jpg"/>
</div>
<p> Updated: 11.12.2017</p>
<h1><a class="anchor" id="example_usage"></a>
Rover API Example Usage</h1>
<p>The following is an example C++ application using some of the Rover API functions:</p>
<dl class="section warning"><dt>Warning</dt><dd>For more concreate examples please go to: <a href="https://github.com/app4mc-rover/rover-app/tree/master/src/examples">https://github.com/app4mc-rover/rover-app/tree/master/src/examples</a></dd></dl>
<div class="fragment"><div class="line"><span class="comment">//Basis Include</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__api_8hpp.html">roverapi/rover_api.hpp</a>&gt;</span></div><div class="line"><span class="comment">//Other Includes</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__honocloud_8hpp.html">roverapi/rover_honocloud.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__dht22_8hpp.html">roverapi/rover_dht22.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__display_8hpp.html">roverapi/rover_display.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__driving_8hpp.html">roverapi/rover_driving.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__buzzer_8hpp.html">roverapi/rover_buzzer.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__button_8hpp.html">roverapi/rover_button.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__grooveultrasonic_8hpp.html">roverapi/rover_grooveultrasonic.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__gy521_8hpp.html">roverapi/rover_gy521.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__hcsr04_8hpp.html">roverapi/rover_hcsr04.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__hmc5883l_8hpp.html">roverapi/rover_hmc5883l.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__infraredsensor_8hpp.html">roverapi/rover_infraredsensor.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__qmc5883l_8hpp.html">roverapi/rover_qmc5883l.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__utils_8hpp.html">roverapi/rover_utils.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__pahomqtt_8hpp.html">roverapi/rover_pahomqtt.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rover__mqttcommand_8hpp.html">roverapi/rover_mqttcommand.hpp</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacerover.html">rover</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="comment">//This initialization is a one time only must-call before every rover application, initializes low-level GPIO driver</span></div><div class="line">    <a class="code" href="classrover_1_1_rover_base.html">RoverBase</a> r_base = <a class="code" href="classrover_1_1_rover_base.html">RoverBase</a>();</div><div class="line">    r_base.<a class="code" href="classrover_1_1_rover_base.html#acfb135ac2f77892304999649d09df62d">initialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">// Set-up cloud instance and register your device</span></div><div class="line">    <a class="code" href="classrover_1_1_rover_hono_cloud.html">RoverHonoCloud</a> r_cloud = <a class="code" href="classrover_1_1_rover_hono_cloud.html">RoverHonoCloud</a> (<span class="stringliteral">&quot;myhost&quot;</span>, 8080, 28080, <span class="stringliteral">&quot;DEFAULT_TENANT&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// To override the initial RoverCloud set-up</span></div><div class="line">    r_cloud.<a class="code" href="classrover_1_1_rover_hono_cloud.html#a76d8906cc2e130c56de66ff5bf180588">setHono</a>(<span class="stringliteral">&quot;localhost&quot;</span>, 8080, <span class="stringliteral">&quot;DEFAULT_TENANT&quot;</span>);</div><div class="line">    r_cloud.<a class="code" href="classrover_1_1_rover_hono_cloud.html#a033c33fd55d4232166fe2e801e71eb9c">setRegistrationPort</a>(28080);</div><div class="line"></div><div class="line">    <span class="comment">// Register a Device</span></div><div class="line">    <span class="keywordflow">if</span> (r_cloud.<a class="code" href="classrover_1_1_rover_hono_cloud.html#a10e1c6c12b356fb443639e648e0d3f41">registerDevice</a>(<span class="stringliteral">&quot;4711&quot;</span>) == 1)</div><div class="line">    {</div><div class="line">        printf (<span class="stringliteral">&quot;Registered device to Hono cloud using REST API successfully..\n&quot;</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Send telemetry data to Hono instance</span></div><div class="line">    <span class="keywordflow">if</span> (r_cloud.<a class="code" href="classrover_1_1_rover_hono_cloud.html#ac7d8067a54703dcf4cdc8482deb3f5bd">sendTelemetry</a>(<span class="stringliteral">&quot;4711&quot;</span>,<span class="stringliteral">&quot;myuser&quot;</span>,<span class="stringliteral">&quot;mypassword&quot;</span>,<span class="stringliteral">&quot;roverFront&quot;</span>, 100.0) == 1)</div><div class="line">    {</div><div class="line">        printf (<span class="stringliteral">&quot;Data sent to Hono cloud using REST API successfully..\n&quot;</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Driving with rover</span></div><div class="line">    <a class="code" href="classrover_1_1_rover_driving.html">RoverDriving</a> r_driving = <a class="code" href="classrover_1_1_rover_driving.html">RoverDriving</a>();</div><div class="line">    r_driving.<a class="code" href="classrover_1_1_rover_driving.html#a29769762d08186ef28314148be89c156">initialize</a>();</div><div class="line"></div><div class="line">    r_driving.<a class="code" href="classrover_1_1_rover_driving.html#a90affc64d2ff3453d85721ffa363507a">setSpeed</a>(<a class="code" href="namespacerover.html#a3143dc31953c809621c55955c62a31f6">HIGHEST_SPEED</a>);</div><div class="line">    r_driving.<a class="code" href="classrover_1_1_rover_driving.html#a9e35baf0993a42d415a88b0c499525c7">goForward</a>();</div><div class="line">    r_base.<a class="code" href="classrover_1_1_rover_base.html#a0342bfeb4bf570ae279ea4873a2dcf65">sleep</a> (500); <span class="comment">// Sleep for some time in milliseconds</span></div><div class="line">    r_driving.<a class="code" href="classrover_1_1_rover_driving.html#acdb3afaf799b54ae9dad98f95221a653">turnRight</a>();</div><div class="line">    r_base.<a class="code" href="classrover_1_1_rover_base.html#a0342bfeb4bf570ae279ea4873a2dcf65">sleep</a> (500); <span class="comment">// Sleep for some time in milliseconds</span></div><div class="line">    r_driving.<a class="code" href="classrover_1_1_rover_driving.html#ae8ba0b0576829ede8decda3f52178bda">stopRover</a>();</div><div class="line"></div><div class="line">    <span class="comment">// Instantiation of Rover sensors</span></div><div class="line">    <a class="code" href="classrover_1_1_rover_h_c_s_r04.html">RoverHCSR04</a> r_front = <a class="code" href="classrover_1_1_rover_h_c_s_r04.html">RoverHCSR04</a>(<a class="code" href="namespacerover.html#abc0687abea7544bf77df39d51224d77da87cdea4d4ebc20758bfb476629e02629">ROVER_FRONT</a>);</div><div class="line">    <a class="code" href="classrover_1_1_rover_h_c_s_r04.html">RoverHCSR04</a> r_rear = <a class="code" href="classrover_1_1_rover_h_c_s_r04.html">RoverHCSR04</a>(<a class="code" href="namespacerover.html#abc0687abea7544bf77df39d51224d77da4afb5c55f1013c148370d4831b734274">ROVER_REAR</a>);</div><div class="line">    <span class="comment">// or  RoverGrooveUltrasonic r_rear = RoverGrooveUltrasonic(ROVER_REAR);</span></div><div class="line">    <a class="code" href="classrover_1_1_rover_infrared_sensor.html">RoverInfraredSensor</a> r_infrared0 = <a class="code" href="classrover_1_1_rover_infrared_sensor.html">RoverInfraredSensor</a>(<a class="code" href="namespacerover.html#abc0687abea7544bf77df39d51224d77daec5c8a7ae784bd756dbdc14ad0bfd1d0">ROVER_REAR_RIGHT</a>);</div><div class="line">    <a class="code" href="classrover_1_1_rover_infrared_sensor.html">RoverInfraredSensor</a> r_infrared1 = <a class="code" href="classrover_1_1_rover_infrared_sensor.html">RoverInfraredSensor</a>(<a class="code" href="namespacerover.html#abc0687abea7544bf77df39d51224d77da410d10bf34947b287385626f2d010e4b">ROVER_REAR_LEFT</a>);</div><div class="line">    <a class="code" href="classrover_1_1_rover_infrared_sensor.html">RoverInfraredSensor</a> r_infrared2 = <a class="code" href="classrover_1_1_rover_infrared_sensor.html">RoverInfraredSensor</a>(<a class="code" href="namespacerover.html#abc0687abea7544bf77df39d51224d77dac4fd1d3838d7eee57ca5284a479972dc">ROVER_FRONT_RIGHT</a>);</div><div class="line">    <a class="code" href="classrover_1_1_rover_infrared_sensor.html">RoverInfraredSensor</a> r_infrared3 = <a class="code" href="classrover_1_1_rover_infrared_sensor.html">RoverInfraredSensor</a>(<a class="code" href="namespacerover.html#abc0687abea7544bf77df39d51224d77da2263988c6b4a09e6ab22790369b12953">ROVER_FRONT_LEFT</a>);</div><div class="line">    <a class="code" href="classrover_1_1_rover_d_h_t22.html">RoverDHT22</a> r_dht22 = <a class="code" href="classrover_1_1_rover_d_h_t22.html">RoverDHT22</a>();</div><div class="line">    <a class="code" href="classrover_1_1_rover_h_m_c5883_l.html">RoverHMC5883L</a> r_hmc = <a class="code" href="classrover_1_1_rover_h_m_c5883_l.html">RoverHMC5883L</a>();</div><div class="line">    <span class="comment">// or RoverQMC5883L r_qmc = RoverQMC5883L();</span></div><div class="line"></div><div class="line">    <span class="comment">// Set up ultrasonic sensors</span></div><div class="line">    r_front.<a class="code" href="classrover_1_1_rover_h_c_s_r04.html#a417317e018b50cc80e45855d34e939a8">initialize</a>();</div><div class="line">    r_rear.<a class="code" href="classrover_1_1_rover_h_c_s_r04.html#a417317e018b50cc80e45855d34e939a8">initialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">// Set up infrared sensors</span></div><div class="line">    r_infrared0.<a class="code" href="classrover_1_1_rover_infrared_sensor.html#aa628305e23cfbe20bd2c773817a7c8bb">initialize</a>();</div><div class="line">    r_infrared1.<a class="code" href="classrover_1_1_rover_infrared_sensor.html#aa628305e23cfbe20bd2c773817a7c8bb">initialize</a>();</div><div class="line">    r_infrared2.<a class="code" href="classrover_1_1_rover_infrared_sensor.html#aa628305e23cfbe20bd2c773817a7c8bb">initialize</a>();</div><div class="line">    r_infrared3.<a class="code" href="classrover_1_1_rover_infrared_sensor.html#aa628305e23cfbe20bd2c773817a7c8bb">initialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">// Set up DHT22 temperature and humidity sensor</span></div><div class="line">    r_dht22.<a class="code" href="classrover_1_1_rover_d_h_t22.html#af11ef4982124a990d4fa207f4c630931">initialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">// Set up HMC5883L or QMC5883L compass sensor</span></div><div class="line">    r_hmc.<a class="code" href="classrover_1_1_rover_h_m_c5883_l.html#aa417fcc6da9ac40fff22553f0bc4a3cb">initialize</a>();</div><div class="line">    <span class="comment">//r_qmc.initialize();</span></div><div class="line"></div><div class="line">    printf (<span class="stringliteral">&quot;Ultrasonic = [%f %f]\n&quot;</span>,   r_front.<a class="code" href="classrover_1_1_rover_h_c_s_r04.html#af0eeaa130320b7015eb85b90142fa6bb">read</a>(),</div><div class="line">                                        r_rear.<a class="code" href="classrover_1_1_rover_h_c_s_r04.html#af0eeaa130320b7015eb85b90142fa6bb">read</a>());</div><div class="line">    printf (<span class="stringliteral">&quot;Infrared = [%f %f %f %f]\n&quot;</span>,   r_infrared0.<a class="code" href="classrover_1_1_rover_infrared_sensor.html#a698731999a25b0b31934d68e93220981">read</a>(),</div><div class="line">                                            r_infrared1.<a class="code" href="classrover_1_1_rover_infrared_sensor.html#a698731999a25b0b31934d68e93220981">read</a>(),</div><div class="line">                                            r_infrared2.<a class="code" href="classrover_1_1_rover_infrared_sensor.html#a698731999a25b0b31934d68e93220981">read</a>(),</div><div class="line">                                            r_infrared3.<a class="code" href="classrover_1_1_rover_infrared_sensor.html#a698731999a25b0b31934d68e93220981">read</a>());</div><div class="line">    printf (<span class="stringliteral">&quot;Bearing with HMC5883L = %f\n&quot;</span>,     r_hmc.<a class="code" href="classrover_1_1_rover_h_m_c5883_l.html#aa5b843ab20d6bf423b28f388dca2b250">read</a>());</div><div class="line">    <span class="comment">// or printf (&quot;Bearing with QMC5883L = %f\n&quot;,       r_qmc.read());</span></div><div class="line"></div><div class="line">    <span class="comment">// Instantiate objects to access buzzer and buttons on the rover</span></div><div class="line">    <a class="code" href="classrover_1_1_rover_button.html">RoverButton</a> user_b = <a class="code" href="classrover_1_1_rover_button.html">RoverButton</a> (<a class="code" href="namespacerover.html#af91c73a4a28a724d343d5858f74a455ba366b0cb76a4250c73b05c6081fb8e858">USER_BUTTON</a>);</div><div class="line">    <a class="code" href="classrover_1_1_rover_button.html">RoverButton</a> shutdown_b = <a class="code" href="classrover_1_1_rover_button.html">RoverButton</a> (<a class="code" href="namespacerover.html#af91c73a4a28a724d343d5858f74a455ba248ca4ccae105b892694b0f6c9c0abc2">SHUTDOWN_BUTTON</a>);</div><div class="line">    <a class="code" href="classrover_1_1_rover_buzzer.html">RoverBuzzer</a> buzzer = <a class="code" href="classrover_1_1_rover_buzzer.html">RoverBuzzer</a>();</div><div class="line"></div><div class="line">    user_b.initialize();</div><div class="line">    shutdown_b.<a class="code" href="classrover_1_1_rover_button.html#abfd034123bf37c378593956adf963f78">initialize</a>();</div><div class="line">    buzzer.<a class="code" href="classrover_1_1_rover_buzzer.html#af11257b87f8f51a2d050162e99f31aef">initialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">// Checking if a button is pressed (LOW) and playing a tone with buzzer</span></div><div class="line">    <span class="keywordflow">if</span> (user_b.readButton() == user_b.LO)</div><div class="line">    {</div><div class="line">        buzzer.<a class="code" href="classrover_1_1_rover_buzzer.html#abdc82f5fa37cd75a134d6ec7240b9ac2">setBuzzerFrequency</a>(400); <span class="comment">//in Hz</span></div><div class="line">        buzzer.<a class="code" href="classrover_1_1_rover_buzzer.html#a43be9315113b36e8c3d41396180a1c53">setBuzzerOn</a>();</div><div class="line">        r_base.<a class="code" href="classrover_1_1_rover_base.html#a0342bfeb4bf570ae279ea4873a2dcf65">sleep</a>(1000);</div><div class="line">    }</div><div class="line">    buzzer.<a class="code" href="classrover_1_1_rover_buzzer.html#aeb3d3c0eed63e0d26ed5ce4614e7e2b7">setBuzzerOff</a>();</div><div class="line"></div><div class="line">    <span class="comment">// Instantiate a RoverUtils object to access member functions that deals with status and performance tasks</span></div><div class="line">    <a class="code" href="classrover_1_1_rover_utils.html">RoverUtils</a> r_utils = <a class="code" href="classrover_1_1_rover_utils.html">RoverUtils</a>(); <span class="comment">//RoverUtils does not need to be initialized</span></div><div class="line"></div><div class="line">    <span class="comment">// Print core utilization from the rover&#39;s OS</span></div><div class="line">    <span class="keywordtype">float</span> util[4];</div><div class="line">    r_utils.<a class="code" href="classrover_1_1_rover_utils.html#abb3cf4a2cc3c8b3ce7fcca08967d7f60">getCoreUtilization</a>(util);</div><div class="line">    printf (<span class="stringliteral">&quot;Utilization = [%f %f %f %f]\n&quot;</span>, util[0], util[1], util[2], util[3]);</div><div class="line"></div><div class="line">    <span class="comment">// Use the OLED display on the rover</span></div><div class="line">    <a class="code" href="classrover_1_1_rover_display.html">RoverDisplay</a> my_display = <a class="code" href="classrover_1_1_rover_display.html">RoverDisplay</a>();</div><div class="line"></div><div class="line">    <span class="comment">// Prepare display contents</span></div><div class="line">    my_display.<a class="code" href="classrover_1_1_rover_display.html#a77f7dd05d40b0d22ad932b29f55ef374">clearDisplay</a>();</div><div class="line">    my_display.<a class="code" href="classrover_1_1_rover_display.html#a4cb4ee3c91dd53a3d3010ecc0ae92a00">setTextSize</a>(2);</div><div class="line">    my_display.<a class="code" href="classrover_1_1_rover_display.html#a4463296a9a2d703bd26858e98d1faa8c">setTextColor</a>(my_display.<a class="code" href="classrover_1_1_rover_display.html#a21ab5a1fda0a0fd091f7645c8ac3348a">WHITE_COLOR</a>);</div><div class="line"></div><div class="line">    my_display.<a class="code" href="classrover_1_1_rover_display.html#afaa8634f72594cf8e9c9b7c50da0bed9">setCursor</a>(12,10);</div><div class="line">    my_display.<a class="code" href="classrover_1_1_rover_display.html#ac4f6996609efcd27c9958ec9a99c4efc">print</a>(<span class="stringliteral">&quot;INTERNET:&quot;</span>);</div><div class="line"></div><div class="line">    my_display.<a class="code" href="classrover_1_1_rover_display.html#a4cb4ee3c91dd53a3d3010ecc0ae92a00">setTextSize</a>(3);</div><div class="line">    my_display.<a class="code" href="classrover_1_1_rover_display.html#a4463296a9a2d703bd26858e98d1faa8c">setTextColor</a>(my_display.<a class="code" href="classrover_1_1_rover_display.html#a21ab5a1fda0a0fd091f7645c8ac3348a">WHITE_COLOR</a>);</div><div class="line"></div><div class="line">    <span class="comment">// Check if internet is connected</span></div><div class="line">    <span class="keywordflow">if</span> (r_utils.<a class="code" href="classrover_1_1_rover_utils.html#a7e06db95a3fe8ca84feb3ebc1d51c966">getInternetStatus</a>() == 1)</div><div class="line">    {</div><div class="line">        my_display.<a class="code" href="classrover_1_1_rover_display.html#afaa8634f72594cf8e9c9b7c50da0bed9">setCursor</a>(50,32);</div><div class="line">        my_display.<a class="code" href="classrover_1_1_rover_display.html#ac4f6996609efcd27c9958ec9a99c4efc">print</a>(<span class="stringliteral">&quot;ON&quot;</span>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        my_display.<a class="code" href="classrover_1_1_rover_display.html#afaa8634f72594cf8e9c9b7c50da0bed9">setCursor</a>(43,32);</div><div class="line">        my_display.<a class="code" href="classrover_1_1_rover_display.html#ac4f6996609efcd27c9958ec9a99c4efc">print</a>(<span class="stringliteral">&quot;OFF&quot;</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Display now</span></div><div class="line">    my_display.<a class="code" href="classrover_1_1_rover_display.html#aa0aff386f7f98887a9668baba26c1ac3">display</a>();</div><div class="line"></div><div class="line">    <span class="comment">// Publish to a topic in an MQTTv3 or MQTTv3.1 broker using RoverPahoMQTT class</span></div><div class="line"></div><div class="line">    <a class="code" href="structrover_1_1_rover_m_q_t_t___configure__t.html">RoverMQTT_Configure_t</a> rover_mqtt_conf;</div><div class="line">    rover_mqtt_conf.<a class="code" href="structrover_1_1_rover_m_q_t_t___configure__t.html#ae9f7d27b571086044bdfad68bff59024">clientID</a> = <span class="stringliteral">&quot;rover&quot;</span>;                         <span class="comment">// Identification of the Client</span></div><div class="line">    rover_mqtt_conf.<a class="code" href="structrover_1_1_rover_m_q_t_t___configure__t.html#a91bf023f40995b4f7abf82a0c3f6ebca">qos</a>      = 1;                               <span class="comment">// Quality of Service</span></div><div class="line">    rover_mqtt_conf.<a class="code" href="structrover_1_1_rover_m_q_t_t___configure__t.html#aefc8532bed76f8f068f8917884fa06b1">timeout</a>  = 10000L;                          <span class="comment">// Polling timeout, 10000L is fine</span></div><div class="line">    rover_mqtt_conf.<a class="code" href="structrover_1_1_rover_m_q_t_t___configure__t.html#ae14b257c44d09fcd64ad64c4c20c0872">topic</a>    = <span class="stringliteral">&quot;rover/RoverDriving/control/1&quot;</span>;  <span class="comment">// Topic name to publish to or subscribe from</span></div><div class="line">    rover_mqtt_conf.<a class="code" href="structrover_1_1_rover_m_q_t_t___configure__t.html#afcad0c134471c39d1da68346d5c8f26b">username</a>    = <span class="stringliteral">&quot;sensor1@DEFAULT_TENANT&quot;</span>;     <span class="comment">// Username - Leave empty for no user and password</span></div><div class="line">    rover_mqtt_conf.<a class="code" href="structrover_1_1_rover_m_q_t_t___configure__t.html#a0b1e1e4d4b8e93da6b6799c0eb522c7a">password</a>    = <span class="stringliteral">&quot;hono-secret&quot;</span>;                <span class="comment">// Password - Leave empty for no user and password</span></div><div class="line">    <a class="code" href="classrover_1_1_rover_paho_m_q_t_t.html">RoverPahoMQTT</a> rover_mqtt = <a class="code" href="classrover_1_1_rover_paho_m_q_t_t.html">RoverPahoMQTT</a> (  <span class="stringliteral">&quot;127.0.0.1&quot;</span>,    <span class="comment">// MQTT-Broker host</span></div><div class="line">                                                1883,           <span class="comment">// MQTT-Broker port</span></div><div class="line">                                                rover_mqtt_conf);</div><div class="line"></div><div class="line">    <span class="comment">// Overriding payload and topic</span></div><div class="line">    <span class="keywordtype">char</span> payloadMsg[] = <span class="stringliteral">&quot;Hi from rover!&quot;</span>;</div><div class="line">    rover_mqtt.<a class="code" href="classrover_1_1_rover_paho_m_q_t_t.html#a24444f6a77f1955963f48a7f50c9c122">setPayload</a> (payloadMsg, strlen(payloadMsg));</div><div class="line">    rover_mqtt.<a class="code" href="classrover_1_1_rover_paho_m_q_t_t.html#a062b4df6c65177eb0da27acf3308ea19">setTopic</a> (<span class="stringliteral">&quot;rover/RoverDriving/control/2&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Publish is non-blocking, client disconnects afterwards</span></div><div class="line">    <span class="keywordflow">if</span> (0 == rover_mqtt.<a class="code" href="classrover_1_1_rover_paho_m_q_t_t.html#a3cabf13af4f4adf0e5c013351c87530f">publish</a>())</div><div class="line">        printf (<span class="stringliteral">&quot;Publishing successful!\n&quot;</span>);</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        printf (<span class="stringliteral">&quot;Publishing unsuccessful!\n&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Subscribe is non-blocking, works with internal callbacks</span></div><div class="line">    <span class="comment">// unsubscribe() method should be used after finished</span></div><div class="line">    <span class="keywordflow">if</span> (0 == rover_mqtt.<a class="code" href="classrover_1_1_rover_paho_m_q_t_t.html#a1e1a41dcf55d4f8fa0bcac66e9bf3977">subscribe</a>())</div><div class="line">    {</div><div class="line">        printf (<span class="stringliteral">&quot;Subscribe successful!\n&quot;</span>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        printf (<span class="stringliteral">&quot;Subscribe unsuccessful!\n&quot;</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Receive the final message that is arrived from the subscribed topic</span></div><div class="line">    <span class="keywordtype">char</span> data[50];</div><div class="line">    rover_mqtt.<a class="code" href="classrover_1_1_rover_paho_m_q_t_t.html#aa8672c1850490ea33f21556e3620c1df">read</a>(data);</div><div class="line">    printf (<span class="stringliteral">&quot;Received data=%s\n&quot;</span>, data);</div><div class="line"></div><div class="line">    <span class="comment">// Unsubscribe and disconnect</span></div><div class="line">    <span class="keywordflow">if</span> (0 == rover_mqtt.<a class="code" href="classrover_1_1_rover_paho_m_q_t_t.html#acf0939a41a90f202518e8d2fb7988010">unsubscribe</a>())</div><div class="line">    {</div><div class="line">        printf (<span class="stringliteral">&quot;Unsubscribe successful!\n&quot;</span>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        printf (<span class="stringliteral">&quot;Unsubscribe unsuccessful!\n&quot;</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Sleep a bit</span></div><div class="line">    r_base.<a class="code" href="classrover_1_1_rover_base.html#a0342bfeb4bf570ae279ea4873a2dcf65">sleep</a>(5000);</div><div class="line"></div><div class="line">    <span class="comment">// Shutdown the rover OS and abort the application</span></div><div class="line">    r_base.<a class="code" href="classrover_1_1_rover_base.html#a4569fb3b46b3739f5f51de1b51caecae">shutdown</a>();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 1;</div><div class="line">}</div></div><!-- fragment --><p>To see the example code related to classes, you can select classes and see detailed descriptions.</p>
<h1><a class="anchor" id="roverdocs"></a>
Rover Documentation</h1>
<p>Link: <a href="http://app4mc-rover.github.io/rover-docs">Rover Complete Documentation</a></p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright(C) 2017 IDiAL Institute, Fachhochschule Dortmund </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
